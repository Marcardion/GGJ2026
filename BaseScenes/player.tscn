[gd_scene format=3 uid="uid://kk0fhnjjanvm"]

[ext_resource type="Script" uid="uid://dg7hy3jalwraf" path="res://Scripts/Player/Player.gd" id="1_4flbx"]
[ext_resource type="Texture2D" uid="uid://c7pofyyvwv5s3" path="res://art/gun_sprites.png" id="2_onrkg"]
[ext_resource type="AudioStream" uid="uid://bye1p8ym3yn64" path="res://Sounds/player/walk/sfx_walk_2.wav" id="3_ewbpw"]
[ext_resource type="Texture2D" uid="uid://b54coabu2g0x8" path="res://art/UI/tile_0135.png" id="3_hqtel"]
[ext_resource type="Texture2D" uid="uid://cynknu73exjbv" path="res://art/UI/tile_0201.png" id="3_i3pqv"]
[ext_resource type="AudioStream" uid="uid://cq30vtlf8asq0" path="res://Sounds/player/walk/sfx_walk_3.wav" id="4_pqltq"]
[ext_resource type="Texture2D" uid="uid://bs7j8xap4xd27" path="res://art/UI/mask_dying.png" id="5_1f6qr"]
[ext_resource type="Texture2D" uid="uid://dl3qhyjmcxdmn" path="res://art/2D assets/sprites/player_hand_empty.png" id="5_mtku5"]
[ext_resource type="AudioStream" uid="uid://cagipsvcnx1g7" path="res://Sounds/player/walk/sfx_walk_4.wav" id="5_qvo46"]
[ext_resource type="Texture2D" uid="uid://ciunr3lcssas" path="res://art/2D assets/sprites/player_hand_holdlight.png" id="6_5wodn"]
[ext_resource type="Texture2D" uid="uid://dklwdw4vo3261" path="res://art/2D assets/sprites/player_hand_holdgun.png" id="6_h66fj"]
[ext_resource type="AudioStream" uid="uid://c7cabn26d7v2k" path="res://Sounds/player/walk/sfx_walk_5.wav" id="6_i54xc"]
[ext_resource type="Texture2D" uid="uid://i58gi02pdfdp" path="res://art/UI/mask_hurt.png" id="6_v1g8r"]
[ext_resource type="AudioStream" uid="uid://c6swe2a1q7sue" path="res://Sounds/player/walk/sfx_walk_6.wav" id="7_2odv1"]
[ext_resource type="AudioStream" uid="uid://b1strnudq1yfh" path="res://Sounds/player/walk/sfx_walk_7.wav" id="8_6n7ef"]
[ext_resource type="Texture2D" uid="uid://ctpbrkojhr1uv" path="res://art/2D assets/sprites/player_hand_focuslight.png" id="8_lje0r"]
[ext_resource type="AudioStream" uid="uid://drq78qkm40hlt" path="res://Sounds/player/walk/sfx_walk_8.wav" id="9_jkxdg"]
[ext_resource type="AudioStream" uid="uid://bvtqikscgtm88" path="res://Sounds/player/gun/258250__breezeark__flintlock-gunshot.wav" id="9_lje0r"]
[ext_resource type="Texture2D" uid="uid://dr20sgg5ykbdb" path="res://art/2D assets/sprites/player_hand_holdgun_shoot.png" id="9_o2f1p"]
[ext_resource type="Texture2D" uid="uid://bgo14vl66qv35" path="res://art/2D assets/sprites/player_hand_holdgun_recoil.png" id="10_kjg1k"]
[ext_resource type="AudioStream" uid="uid://fq01opntlvil" path="res://Sounds/player/walk/sfx_walk_9.wav" id="10_xp531"]
[ext_resource type="Texture2D" uid="uid://c186rghqnimol" path="res://art/UI/mask_grid.png" id="11_tigwy"]
[ext_resource type="Texture2D" uid="uid://cskil41nk8nob" path="res://art/2D assets/lantern_1.png" id="12_kjg1k"]
[ext_resource type="Texture2D" uid="uid://cj5tnd6t77v3o" path="res://art/UI/mask_normal.png" id="12_no26x"]
[ext_resource type="Texture2D" uid="uid://dbgvr5fxb86t5" path="res://art/2D assets/lantern_2.png" id="13_i7cpr"]
[ext_resource type="Texture2D" uid="uid://b0jaf2b5qxjk7" path="res://art/UI/curtain_2.png" id="14_i7cpr"]
[ext_resource type="AudioStream" uid="uid://cydu5dn1h50is" path="res://Sounds/player/damage/sfx_hurt_2.wav" id="17_2odv1"]
[ext_resource type="AudioStream" uid="uid://dtpsmb25xmokt" path="res://Sounds/player/walk/sfx_walk_1.wav" id="17_ywwvu"]
[ext_resource type="AudioStream" uid="uid://be3bvvoj4u4lg" path="res://Sounds/player/damage/sfx_hurt_3.wav" id="18_6n7ef"]
[ext_resource type="Texture2D" uid="uid://kicw1lw108om" path="res://art/UI/SPR_DamageScreen.png" id="19_v1g8r"]
[ext_resource type="Texture2D" uid="uid://f8lhky30acao" path="res://art/UI/curtain_1.png" id="20_yu5ns"]
[ext_resource type="Theme" uid="uid://bawy0u7g7ye80" path="res://button_basic.tres" id="21_ywwvu"]
[ext_resource type="AudioStream" uid="uid://6mwijpucpydg" path="res://Sounds/player/damage/sfx_hurt_1.wav" id="26_qvo46"]
[ext_resource type="AudioStream" uid="uid://b3nueqw7cpkv4" path="res://Sounds/player/damage/sfx_dying.wav" id="27_i54xc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_wydro"]

[sub_resource type="AtlasTexture" id="AtlasTexture_i3pqv"]
atlas = ExtResource("2_onrkg")
region = Rect2(0, 0, 512, 512)

[sub_resource type="SpriteFrames" id="SpriteFrames_hqtel"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_i3pqv")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_mtku5")
}],
"loop": true,
"name": &"idle_hand",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_5wodn")
}],
"loop": true,
"name": &"idle_lantern",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_h66fj")
}],
"loop": true,
"name": &"idle_pistol",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_lje0r")
}],
"loop": true,
"name": &"point_lantern",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_o2f1p")
}, {
"duration": 1.0,
"texture": ExtResource("10_kjg1k")
}, {
"duration": 1.0,
"texture": ExtResource("6_h66fj")
}],
"loop": false,
"name": &"shoot",
"speed": 5.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_pwk74"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_kjg1k")
}, {
"duration": 1.0,
"texture": ExtResource("13_i7cpr")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}]

[node name="Player" type="CharacterBody3D" unique_id=2124719694 groups=["player"]]
process_mode = 3
collision_layer = 7
collision_mask = 7
floor_max_angle = 1.0471976
script = ExtResource("1_4flbx")
attackCooldown = 0.5
footStepSounds = Array[AudioStream]([ExtResource("17_ywwvu"), ExtResource("3_ewbpw"), ExtResource("4_pqltq"), ExtResource("5_qvo46"), ExtResource("6_i54xc"), ExtResource("7_2odv1"), ExtResource("8_6n7ef"), ExtResource("9_jkxdg"), ExtResource("10_xp531")])
basicCrosshair = ExtResource("3_i3pqv")
interactCrosshair = ExtResource("3_hqtel")
neutralMask = ExtResource("12_no26x")
damagedMask = ExtResource("6_v1g8r")
nearDeathMask = ExtResource("5_1f6qr")
damageSounds = Array[AudioStream]([ExtResource("26_qvo46"), ExtResource("17_2odv1"), ExtResource("18_6n7ef")])

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=74756443]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_wydro")
debug_color = Color(0, 0.6, 0.69803923, 1)

[node name="Head" type="Node3D" parent="." unique_id=1061304472]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.67939, 0)

[node name="Camera3D" type="Camera3D" parent="Head" unique_id=1161783948]

[node name="InteractRayCast" type="RayCast3D" parent="Head/Camera3D" unique_id=256204431]
target_position = Vector3(0, 0, -1.1)
collision_mask = 2
debug_shape_custom_color = Color(0.629061, 0.7433998, 0.96105665, 1)
debug_shape_thickness = 3

[node name="GunRayCast" type="RayCast3D" parent="Head/Camera3D" unique_id=1669860427]
target_position = Vector3(0, 0, -20)
debug_shape_custom_color = Color(0.629061, 0.7433998, 0.96105665, 1)
debug_shape_thickness = 3

[node name="GunSprite" type="AnimatedSprite3D" parent="Head/Camera3D" unique_id=102393395]
transform = Transform3D(0.09563048, -0.02923717, 0, 0.02923717, 0.09563048, 0, 0, 0, 0.1, 0.4, -0.28, -0.5)
layers = 2
sprite_frames = SubResource("SpriteFrames_hqtel")
animation = &"shoot"
autoplay = "idle_pistol"

[node name="GunFireSFX" type="AudioStreamPlayer3D" parent="Head/Camera3D/GunSprite" unique_id=2030951140]
transform = Transform3D(9.205049, 3.907311, 0, -3.907311, 9.205049, 0, 0, 0, 9.999999, -9.472048, -11.181772, 4.9999995)
stream = ExtResource("9_lje0r")

[node name="LanternSprite" type="AnimatedSprite3D" parent="Head/Camera3D" unique_id=1630920879]
transform = Transform3D(0.092050485, 0.039073113, 0, -0.039073113, 0.092050485, 0, 0, 0, 0.1, -0.5, -0.28, -0.5)
layers = 2
flip_h = true
sprite_frames = SubResource("SpriteFrames_hqtel")
animation = &"idle_lantern"
autoplay = "idle_lantern"

[node name="Lantern" type="AnimatedSprite3D" parent="Head/Camera3D/LanternSprite" unique_id=1953752903]
transform = Transform3D(0.7364039, -0.3125849, 0, 0.3125849, 0.7364039, 0, 0, 0, 0.8, 1.54, -0.34, -0.585)
no_depth_test = true
sprite_frames = SubResource("SpriteFrames_pwk74")
animation = &"idle"
autoplay = "idle"
frame_progress = 0.78562886

[node name="OmniLight3D" type="OmniLight3D" parent="Head/Camera3D/LanternSprite/Lantern" unique_id=1189185776]
transform = Transform3D(12.500001, 0, 0, 0, 12.500001, 0, 0, 0, 12.5, -10.07149, 2.7785091, 0)
light_size = 0.1

[node name="FootstepSFX" type="AudioStreamPlayer3D" parent="." unique_id=1174358735]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.67939, 0)
stream = ExtResource("17_ywwvu")

[node name="DamageSFX" type="AudioStreamPlayer3D" parent="." unique_id=436211427]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.67939, 0)
stream = ExtResource("26_qvo46")
pitch_scale = 0.9

[node name="DeathSFX" type="AudioStreamPlayer3D" parent="." unique_id=1337092171]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.67939, 0)
stream = ExtResource("27_i54xc")
pitch_scale = 0.9

[node name="Crosshair" type="TextureRect" parent="." unique_id=1024759470]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("3_i3pqv")

[node name="DamageFeedback" type="TextureRect" parent="." unique_id=989766305]
visible = false
z_index = -1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -2.0
offset_top = 6.0
offset_right = 446.0
offset_bottom = 258.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.7823038, 0.7819272)
mouse_filter = 2
texture = ExtResource("19_v1g8r")

[node name="HUD" type="Control" parent="." unique_id=1298503440]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="RightCurtain" type="TextureRect" parent="HUD" unique_id=473595600]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -214.0
offset_right = 352.0
offset_bottom = 1508.0
grow_horizontal = 0
scale = Vector2(0.6, 0.6)
mouse_filter = 2
texture = ExtResource("14_i7cpr")

[node name="LeftCurtain" type="TextureRect" parent="HUD" unique_id=1936546224]
layout_mode = 1
offset_left = -122.0
offset_right = 444.0
offset_bottom = 1508.0
scale = Vector2(0.6, 0.6)
mouse_filter = 2
texture = ExtResource("14_i7cpr")
flip_h = true

[node name="Control" type="Control" parent="HUD" unique_id=1947252842]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_top = -80.0
offset_bottom = -80.0
grow_horizontal = 2
grow_vertical = 0
pivot_offset_ratio = Vector2(0.5, 0.5)
mouse_filter = 2

[node name="MaskBorder" type="TextureRect" parent="HUD/Control" unique_id=1978104700]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -320.0
offset_top = -96.0
offset_right = 320.0
offset_bottom = 113.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.7, 0.7)
pivot_offset_ratio = Vector2(0.5, 0.5)
mouse_filter = 2
texture = ExtResource("11_tigwy")

[node name="MaskSprite" type="TextureRect" parent="HUD/Control/MaskBorder" unique_id=70650695]
z_index = -1
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -46.0
offset_top = -64.0
offset_right = 46.0
offset_bottom = 64.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset_ratio = Vector2(0.5, 0.5)
mouse_filter = 2
texture = ExtResource("12_no26x")

[node name="PauseHUD" type="Control" parent="." unique_id=1599077288]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="ColorRect" type="ColorRect" parent="PauseHUD" unique_id=645171495]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 1)

[node name="TextureRect" type="TextureRect" parent="PauseHUD" unique_id=1094089385]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -1600.0001
offset_right = 1113.2998
offset_bottom = 1508.0
grow_horizontal = 0
scale = Vector2(0.5977961, 0.5977961)
mouse_filter = 2
texture = ExtResource("20_yu5ns")
stretch_mode = 1

[node name="Label" type="Label" parent="PauseHUD" unique_id=309330321]
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_top = -411.0
offset_bottom = -260.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("21_ywwvu")
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0.76862746)
theme_override_constants/shadow_offset_x = 5
theme_override_constants/shadow_offset_y = 5
theme_override_constants/outline_size = 1
theme_override_font_sizes/font_size = 120
text = "PAUSE"
horizontal_alignment = 1
vertical_alignment = 1

[node name="VBoxContainer" type="VBoxContainer" parent="PauseHUD" unique_id=1946679582]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -164.0
offset_top = 4.0
offset_right = 164.0
offset_bottom = 326.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 0
theme_override_constants/separation = 20

[node name="ResumeButton" type="Button" parent="PauseHUD/VBoxContainer" unique_id=942265784]
layout_mode = 2
focus_neighbor_top = NodePath("../QuitGameButton")
focus_neighbor_bottom = NodePath("../BackToMenuButton")
theme = ExtResource("21_ywwvu")
text = "Resume Game"

[node name="BackToMenuButton" type="Button" parent="PauseHUD/VBoxContainer" unique_id=1567183815]
layout_mode = 2
focus_neighbor_top = NodePath("../ResumeButton")
focus_neighbor_bottom = NodePath("../QuitGameButton")
theme = ExtResource("21_ywwvu")
text = "Back to Menu
"

[node name="QuitGameButton" type="Button" parent="PauseHUD/VBoxContainer" unique_id=1166057108]
layout_mode = 2
focus_neighbor_top = NodePath("../BackToMenuButton")
focus_neighbor_bottom = NodePath("../ResumeButton")
theme = ExtResource("21_ywwvu")
text = "Quit Game
"

[connection signal="pressed" from="PauseHUD/VBoxContainer/ResumeButton" to="." method="_on_resume_button_pressed"]
[connection signal="pressed" from="PauseHUD/VBoxContainer/BackToMenuButton" to="." method="_on_back_to_menu_button_pressed"]
[connection signal="pressed" from="PauseHUD/VBoxContainer/QuitGameButton" to="." method="_on_quit_game_button_pressed"]
